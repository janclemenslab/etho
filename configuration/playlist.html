<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Speaker calibration" href="calibration_speaker.html" /><link rel="prev" title="Experimental protocols" href="protocol.html" />

    <!-- Generated with Sphinx 4.5.0 and Furo 2023.05.20 -->
        <title>Stimulus playlists - etho documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=e6660623a769aa55fea372102b9bf3151b292993" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">etho  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="configuration.html">Configuration</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Configuration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="global.html">Global configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol.html">Experimental protocols</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Stimulus playlists</a></li>
<li class="toctree-l2"><a class="reference internal" href="calibration_speaker.html">Speaker calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="calibration_led.html">LED calibration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../callbacks.html">Callbacks</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../hardware/hardware.html">Hardware</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Hardware</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../hardware/camera.html">Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/nidaq.html">National Instruments DAQmx cards</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/projector.html">DLP projector</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/rpi.html">Raspberry PI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/scanimage.html">ScanImage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">CLI</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api_etho.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.app.html">etho.app</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.cli.html">etho.cli</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.client.html">etho.client</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.utils.calibration.html">etho.utils.calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.utils.config.html">etho.utils.config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.utils.runner.html">etho.utils.runner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.utils.shuffled_cycle.html">etho.utils.shuffled_cycle</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.utils.sound.html">etho.utils.sound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.utils.tui.html">etho.utils.tui</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.utils.zeroclient.html">etho.utils.zeroclient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.BLTZeroService.html">etho.services.BLTZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.CamZeroService.html">etho.services.CamZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.DAQZeroService.html">etho.services.DAQZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.GCMZeroService.html">etho.services.GCMZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.NICounterZeroService.html">etho.services.NICounterZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.Opt2ZeroService.html">etho.services.Opt2ZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.RelayZeroService.html">etho.services.RelayZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.SndZeroService.html">etho.services.SndZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.TemplateZeroService.html">etho.services.TemplateZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.ThuAZeroService.html">etho.services.ThuAZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.ThuZeroService.html">etho.services.ThuZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.ZeroService.html">etho.services.ZeroService</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.base.html">etho.services.camera.base</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.basler.html">etho.services.camera.basler</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.dummy.html">etho.services.camera.dummy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.flycapture2.html">etho.services.camera.flycapture2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.hamamatsu.html">etho.services.camera.hamamatsu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.spinnaker.html">etho.services.camera.spinnaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.spinnaker_old.html">etho.services.camera.spinnaker_old</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.videocapture.html">etho.services.camera.videocapture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.camera.ximea.html">etho.services.camera.ximea</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.utils.concurrent_task.html">etho.services.utils.concurrent_task</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.utils.log_exceptions.html">etho.services.utils.log_exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/etho.services.dlp.dlp_make_warpfiles.html">etho.services.dlp.dlp_make_warpfiles</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="stimulus-playlists">
<h1>Stimulus playlists<a class="headerlink" href="#stimulus-playlists" title="Permalink to this headline">#</a></h1>
<section id="playlist-format">
<h2>Playlist format<a class="headerlink" href="#playlist-format" title="Permalink to this headline">#</a></h2>
<p>Playlists are tables saved as tab-delimited text files:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>stimFileName</p></th>
<th class="head"><p>silencePre</p></th>
<th class="head"><p>silencePost</p></th>
<th class="head"><p>delayPost</p></th>
<th class="head"><p>intensity</p></th>
<th class="head"><p>freq</p></th>
<th class="head"><p>MODE</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>superstimulus.wav</p></td>
<td><p>1000</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
<td><p>1.0</p></td>
<td><p>100</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>SIN_100_0_3000</p></td>
<td><p>1000</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
<td><p>1.0</p></td>
<td><p>100</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>[mediocre_stim.wav, MIRROR_LED]</p></td>
<td><p>1000</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
<td><p>1.0</p></td>
<td><p>100</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>[PUL_5_10_10_0, SIN_200_0_2000]</p></td>
<td><p>1000</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
<td><p>1.0</p></td>
<td><p>100</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>[SIN_100_0_3000, SIN_200_0_2000]</p></td>
<td><p>1000</p></td>
<td><p>1000</p></td>
<td><p>0</p></td>
<td><p>1.0</p></td>
<td><p>100</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>[SIN_100_0_3000, SIN_200_0_2000]</p></td>
<td><p>[1000, 1000]</p></td>
<td><p>[1000, 1000]</p></td>
<td><p>[0, 0]</p></td>
<td><p>[1.0, 1.0]</p></td>
<td><p>[100, 100]</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>[SIN_100_0_3000, SIN_200_0_2000]</p></td>
<td><p>[1000, 2000]</p></td>
<td><p>[2000, 1000]</p></td>
<td><p>[0, 0]</p></td>
<td><p>[1.0, 2.0]</p></td>
<td><p>[100, 200]</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
<p>The first row is a header that contain the following column names:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stimFileName</span></code>: If not a magic name, full filename (w/ extension but w/o directory). File needs to be single-channel <code class="docutils literal notranslate"><span class="pre">*.wav</span></code>, placed in the <code class="docutils literal notranslate"><span class="pre">stimfolder</span></code> defined in the <a class="reference internal" href="global.html#global-configuration"><span class="std std-ref">global configuration file</span></a>. Currently defined magic names are: <code class="docutils literal notranslate"><span class="pre">SIN*</span></code>, <code class="docutils literal notranslate"><span class="pre">PUL*</span></code>, <code class="docutils literal notranslate"><span class="pre">MIRROR_LED</span></code>, <code class="docutils literal notranslate"><span class="pre">CLOCK</span></code>, <code class="docutils literal notranslate"><span class="pre">SI_START</span></code>, <code class="docutils literal notranslate"><span class="pre">SI_STOP</span></code>, <code class="docutils literal notranslate"><span class="pre">SCANIMAGE_NEXT</span></code> (see <a class="reference internal" href="#magic"><span class="std std-ref">below</span></a> for details).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">silencePre</span></code> (ms): zeros <em>pre</em>-pended to the stimulus</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">silencePost</span></code> (ms): zeros <em>post</em>-pended to the stimulus</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">delayPost</span></code> (ms, <em>unused</em>):description</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intensity</span></code> (mm/s or dB for sound, mW/mm2 for light): Stimulus intensity.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">freq</span></code> (Hz for sound or nm for light): Used as a key into the attenuation dictionary defined in the global, rig-specific configuration file <code class="docutils literal notranslate"><span class="pre">ethoconfig.ini</span></code>. The frequency specific attenuation value scales the stimulus such that 1V in the stimulus maps to 1 intensity unit.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MODE</span></code> (<em>unused</em>): Can be used to define callbacks.</p></li>
</ul>
</section>
<section id="magic-stimulus-names">
<span id="magic"></span><h2>Magic stimulus names<a class="headerlink" href="#magic-stimulus-names" title="Permalink to this headline">#</a></h2>
<p>The stimulus name can point to a wav file with the predefined waveform in the <code class="docutils literal notranslate"><span class="pre">ethoconfig/stim</span></code>. However, there are <em>magic</em> names for stimuli that are created on demand. They start with prefix and allow you to specify stimulus parameters in the filename:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SIN_frequency_phase_duration</span></code>: Generate sinusoid with frequency (Hz), phase (rad), and duration (ms) specified in the stimulus name. Will start after silencePre and end before silencePost. E.g. <code class="docutils literal notranslate"><span class="pre">SIN_100_0_1000</span></code> will produce a sinusoid with a frequency of 100Hz, a phase of 0, and duration of 1000ms.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PUL_pulseDur_pulsePau_pulseNumber_pulseDelay</span></code>: Generate pulse train (square pulses) with pulse duration, pause, number and intial delay specified in stimulus name (all time units in ms). Will start after silencePre and end before silencePost.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIRROR_LED</span></code>: Will mirror the stimulus in the first channel that does not as a pulse train (pdur &amp; ppau 5ms). Will start after silencePre and end before silencePost.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CLOCK_pulseDur_pulsePau</span></code>: Create a clock signal (for instance for continuously triggering frames). Generate continuous pulse train with pulse duration and pause specified in stimulus name (all time units in ms). Will start after sample 0 (<em>not</em> silencePre) and end at the last sample (<em>not</em> before silencePost).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SI_START</span></code>, <code class="docutils literal notranslate"><span class="pre">SI_STOP</span></code>, <code class="docutils literal notranslate"><span class="pre">SI_NEXT</span></code>: Will add start acquisition, stop acquisition and next file triggers for remote controlling scanimage to the channel. All three stimuli should be specified in the playlist for each stimulus, not just the first or the last one. This will make sure that e.g. starts are triggered even with shuffled playback:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">SI_START</span></code> will set the digital output to 1 for the first 2ms of the trial (starting at sample 0, <em>not</em> at silencePre)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SI_STOP</span></code> and <code class="docutils literal notranslate"><span class="pre">SI_NEXT</span></code> will set the last 2ms of the trial (<em>not</em> before silencePost) to 1. Scanimage should be configured for external triggering with the correct digital channels. The start trigger should be set to “rising”, the stop and next triggers to “falling”. See <a class="reference external" href="https://docs.scanimage.org/Windows+Reference+Guide/Trigger+Controls.html">ScanImage docs</a> for details.</p></li>
</ul>
</li>
</ul>
</section>
<section id="defining-multi-channel-stimulation">
<h2>Defining multi-channel stimulation<a class="headerlink" href="#defining-multi-channel-stimulation" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>For the <code class="docutils literal notranslate"><span class="pre">stimFileName</span></code> column: One entry per channel, as a bracketed, comma-separated list, <code class="docutils literal notranslate"><span class="pre">[stim_on_chan1,</span> <span class="pre">stim_on_chan2,</span> <span class="pre">...]</span></code>. Analog and digital output channels are concatenated, starting with the analog outputs and ending with the digital outputs. E.g. if you define two analog output channels and one digital output channel in your protocol, then the stimuli will map as follow <code class="docutils literal notranslate"><span class="pre">[stim_first_analog_out,</span> <span class="pre">stim_second_analog_out,</span> <span class="pre">stim_digital_out]</span></code>. Whitespace surrounding stimulus names is stripped.</p></li>
</ul>
<!-- `[,stim2]` defines stimulation in which the first output channel is filled with zeros. -->
<ul class="simple">
<li><p>The remaining columns in the playlist can be provided as as bracketed comma-separated lists of values, <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">0.2,</span> <span class="pre">2]</span></code>, to set different intensities etc. for each channel. If fewer entries than channels, then the list will be padded to the number of channels with the last entry in the list.</p></li>
<li><p>The total duration of the multi-channel stimulus is adjusted to the duration of the longest stimulus across all channels, by zero-padding the end the shorter stimuli.</p></li>
</ul>
<!--
## Parsing
Load the playlist like so:
```python
from ethomaster.utils.sound import parse_table, normalize_table
# returns a raw pandas dataframe
raw_table = pd.read_table(playlistfilename, dtype=None, delimiter='\t')
# casts all cells in the table to lists of the correct type and
parsed_table = parse_table(raw_table, dtypes=[str, float, float, float, float, float, str])
# normalizes all cells in a row to have the same number of entries as there are stimuli
playlist = normalize_table(parsed_table)
```
Or simply `playlist = parse_table(playlistfilename)`.

Sounds can be generated from the playlist via:
```python
from ethomaster.utils.sound import load_sounds
sounds = load_sounds(playlist, fs=1000, attenuation=None, stimfolder='~/stimuli'):
```
This will return a list of multidimensional numpy arrays, one item per row in the playlist file. --></section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="calibration_speaker.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Speaker calibration</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="protocol.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Experimental protocols</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Jan Clemens
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Stimulus playlists</a><ul>
<li><a class="reference internal" href="#playlist-format">Playlist format</a></li>
<li><a class="reference internal" href="#magic-stimulus-names">Magic stimulus names</a></li>
<li><a class="reference internal" href="#defining-multi-channel-stimulation">Defining multi-channel stimulation</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/tabs.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    </body>
</html>